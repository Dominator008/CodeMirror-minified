'use strict';(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){var n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,x=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,y=/[*+-]\s/;f.commands.newlineAndIndentContinueMarkdownList=function(d){if(d.getOption("disableInput"))return f.Pass;for(var q=d.listSelections(),r=[],g=0;g<q.length;g++){var b=
q[g].head,a=d.getStateAfter(b.line),e=!1!==a.list,h=0!==a.quote,c=d.getLine(b.line);a=n.exec(c);var l=/^\s*$/.test(c.slice(0,b.ch));if(!q[g].empty()||!e&&!h||!a||l){d.execCommand("newlineAndIndent");return}if(x.test(c))/>\s*$/.test(c)||d.replaceRange("",{line:b.line,ch:0},{line:b.line,ch:b.ch+1}),r[g]="\n";else if(e=a[1],h=a[5],a=(c=!(y.test(a[2])||0<=a[2].indexOf(">")))?parseInt(a[3],10)+1+a[4]:a[2].replace("x"," "),r[g]="\n"+e+a+h,c)a:{a=d;b=b.line;h=e=0;c=n.exec(a.getLine(b));l=c[1];do{e+=1;var t=
b+e,u=a.getLine(t),k=n.exec(u);if(k){var p=k[1],v=parseInt(c[3],10)+e-h,m=parseInt(k[3],10),w=m;if(l!==p||isNaN(m)){if(l.length>p.length)break a;if(l.length<p.length&&1===e)break a;h+=1}else v===m&&(w=m+1),v>m&&(w=v+1),a.replaceRange(u.replace(n,p+w+k[4]+k[5]),{line:t,ch:0},{line:t,ch:u.length})}}while(k)}}d.replaceSelections(r)}});
