'use strict';(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){k.defineMode("xquery",function(){function l(a,b,c){b.tokenize=c;return c(a,b)}function h(a,b){var c=a.next(),e=!1;var g='"'===a.current()?a.match(/^[^"]+":/,!1):"'"===a.current()?a.match(/^[^"]+':/,!1):!1;if("<"==c){if(a.match("!--",!0))return l(a,b,t);if(a.match("![CDATA",!1))return b.tokenize=
u,"tag";if(a.match("?",!1))return l(a,b,v);e=a.eat("/");a.eatSpace();for(var d="";c=a.eat(/[^\s\u00a0=<>"'\/?]/);)d+=c;return l(a,b,w(d,e))}if("{"==c)return b.stack.push({type:"codeblock"}),null;if("}"==c)return f(b),null;if(m(b,"tag"))return">"==c?"tag":"/"==c&&a.eat(">")?(f(b),"tag"):"variable";if(/\d/.test(c))return a.match(/^\d*(?:\.\d*)?(?:E[+\-]?\d+)?/),"atom";if("("===c&&a.eat(":"))return b.stack.push({type:"comment"}),l(a,b,k);if(g||'"'!==c&&"'"!==c){if("$"===c)return l(a,b,x);if(":"===c&&
a.eat("="))return"keyword";if("("===c)return b.stack.push({type:"paren"}),null;if(")"===c)return f(b),null;if("["===c)return b.stack.push({type:"bracket"}),null;if("]"===c)return f(b),null;d=p.propertyIsEnumerable(c)&&p[c];if(g&&'"'===c)for(;'"'!==a.next(););if(g&&"'"===c)for(;"'"!==a.next(););d||a.eatWhile(/[\w\$_-]/);d=a.eat(":");!a.eat(":")&&d&&a.eatWhile(/[\w\$_-]/);a.match(/^[ \t]*\(/,!1)&&(e=!0);a=a.current();d=p.propertyIsEnumerable(a)&&p[a];e&&!d&&(d={type:"function_call",style:"variable def"});
if(m(b,"xmlconstructor"))return f(b),"variable";"element"!=a&&"attribute"!=a&&"axis_specifier"!=d.type||b.stack.push({type:"xmlconstructor"});return d?d.style:"variable"}return l(a,b,q(c))}function k(a,b){for(var c=!1,e=!1,g=0,d;d=a.next();){if(")"==d&&c)if(0<g)g--;else{f(b);break}else":"==d&&e&&g++;c=":"==d;e="("==d}return"comment"}function q(a,b){return function(c,e){if(m(e,"string")&&c.current()==a)return f(e),b&&(e.tokenize=b),"string";var g={type:"string",name:a,tokenize:q(a,b)};e.stack.push(g);
if(c.match("{",!1)&&n(e))return e.tokenize=h,"string";for(;g=c.next();)if(g==a){f(e);b&&(e.tokenize=b);break}else if(c.match("{",!1)&&n(e)){e.tokenize=h;break}return"string"}}function x(a,b){var c=/[\w\$_-]/;if(a.eat('"')){for(;'"'!==a.next(););a.eat(":")}else a.eatWhile(c),a.match(":=",!1)||a.eat(":");a.eatWhile(c);b.tokenize=h;return"variable"}function w(a,b){return function(c,e){c.eatSpace();if(b&&c.eat(">"))return f(e),e.tokenize=h,"tag";c.eat("/")||e.stack.push({type:"tag",name:a,tokenize:h});
c.eat(">")?e.tokenize=h:e.tokenize=r;return"tag"}}function r(a,b){var c=a.next();if("/"==c&&a.eat(">"))return n(b)&&f(b),m(b,"tag")&&f(b),"tag";if(">"==c)return n(b)&&f(b),"tag";if("="==c)return null;if('"'==c||"'"==c)return l(a,b,q(c,r));n(b)||b.stack.push({type:"attribute",tokenize:r});a.eat(/[a-zA-Z_:]/);a.eatWhile(/[-a-zA-Z0-9_:.]/);a.eatSpace();if(a.match(">",!1)||a.match("/",!1))f(b),b.tokenize=h;return"attribute"}function t(a,b){for(var c;c=a.next();)if("-"==c&&a.match("->",!0))return b.tokenize=
h,"comment"}function u(a,b){for(var c;c=a.next();)if("]"==c&&a.match("]",!0))return b.tokenize=h,"comment"}function v(a,b){for(var c;c=a.next();)if("?"==c&&a.match(">",!0))return b.tokenize=h,"comment meta"}function n(a){return m(a,"attribute")}function m(a,b){return a.stack.length&&a.stack[a.stack.length-1].type==b}function f(a){a.stack.pop();a.tokenize=a.stack.length&&a.stack[a.stack.length-1].tokenize||h}var p=function(){for(var a={type:"operator",style:"keyword"},b={type:"atom",style:"atom"},
c={type:"axis_specifier",style:"qualifier"},e={",":{type:"punctuation",style:null}},g="after all allowing ancestor ancestor-or-self any array as ascending at attribute base-uri before boundary-space by case cast castable catch child collation comment construction contains content context copy copy-namespaces count decimal-format declare default delete descendant descendant-or-self descending diacritics different distance document document-node element else empty empty-sequence encoding end entire every exactly except external first following following-sibling for from ftand ftnot ft-option ftor function fuzzy greatest group if import in inherit insensitive insert instance intersect into invoke is item language last lax least let levels lowercase map modify module most namespace next no node nodes no-inherit no-preserve not occurs of only option order ordered ordering paragraph paragraphs parent phrase preceding preceding-sibling preserve previous processing-instruction relationship rename replace return revalidation same satisfies schema schema-attribute schema-element score self sensitive sentence sentences sequence skip sliding some stable start stemming stop strict strip switch text then thesaurus times to transform treat try tumbling type typeswitch union unordered update updating uppercase using validate value variable version weight when where wildcards window with without word words xquery".split(" "),
d=0,f=g.length;d<f;d++)e[g[d]]={type:g[d],style:"keyword"};g="xs:anyAtomicType xs:anySimpleType xs:anyType xs:anyURI xs:base64Binary xs:boolean xs:byte xs:date xs:dateTime xs:dateTimeStamp xs:dayTimeDuration xs:decimal xs:double xs:duration xs:ENTITIES xs:ENTITY xs:float xs:gDay xs:gMonth xs:gMonthDay xs:gYear xs:gYearMonth xs:hexBinary xs:ID xs:IDREF xs:IDREFS xs:int xs:integer xs:item xs:java xs:language xs:long xs:Name xs:NCName xs:negativeInteger xs:NMTOKEN xs:NMTOKENS xs:nonNegativeInteger xs:nonPositiveInteger xs:normalizedString xs:NOTATION xs:numeric xs:positiveInteger xs:precisionDecimal xs:QName xs:short xs:string xs:time xs:token xs:unsignedByte xs:unsignedInt xs:unsignedLong xs:unsignedShort xs:untyped xs:untypedAtomic xs:yearMonthDuration".split(" ");
d=0;for(f=g.length;d<f;d++)e[g[d]]=b;b="eq ne lt le gt ge := = > >= < <= . | ? and or div idiv mod * / + -".split(" ");d=0;for(f=b.length;d<f;d++)e[b[d]]=a;a="self:: attribute:: child:: descendant:: descendant-or-self:: parent:: ancestor:: ancestor-or-self:: following:: preceding:: following-sibling:: preceding-sibling::".split(" ");d=0;for(f=a.length;d<f;d++)e[a[d]]=c;return e}();return{startState:function(){return{tokenize:h,cc:[],stack:[]}},token:function(a,b){return a.eatSpace()?null:b.tokenize(a,
b)},blockCommentStart:"(:",blockCommentEnd:":)"}});k.defineMIME("application/xquery","xquery")});
