'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var d=0;return function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,e){if(c==Array.prototype||c==Object.prototype)return c;c[d]=e.value;return c};$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<c.length;++d){var e=c[d];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,d){var e=$jscomp.propertyToPolyfillSymbol[d];if(null==e)return c[d];e=c[e];return void 0!==e?e:c[d]};
$jscomp.polyfill=function(c,d,e,f){d&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,d,e,f):$jscomp.polyfillUnisolated(c,d,e,f))};$jscomp.polyfillUnisolated=function(c,d,e,f){e=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var g=c[f];g in e||(e[g]={});e=e[g]}c=c[c.length-1];f=e[c];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:d})};
$jscomp.polyfillIsolated=function(c,d,e,f){var g=c.split(".");c=1===g.length;f=g[0];f=!c&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var t=0;t<g.length-1;t++){var m=g[t];m in f||(f[m]={});f=f[m]}g=g[g.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?f[g]:null;d=d(e);null!=d&&(c?$jscomp.defineProperty($jscomp.polyfills,g,{configurable:!0,writable:!0,value:d}):d!==e&&($jscomp.propertyToPolyfillSymbol[g]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(g):$jscomp.POLYFILL_PREFIX+g,g=$jscomp.propertyToPolyfillSymbol[g],
$jscomp.defineProperty(f,g,{configurable:!0,writable:!0,value:d})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(c){if(c)return c;var d=function(c,d){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};d.prototype.toString=function(){return this.$jscomp$symbol$id_};var e=0,f=function(c){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new d("jscomp_symbol_"+(c||"")+"_"+e++,c)};return f},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<d.length;e++){var f=$jscomp.global[d[e]];"function"===typeof f&&"function"!=typeof f.prototype[c]&&$jscomp.defineProperty(f.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,d){c instanceof String&&(c+="");var e=0,f={next:function(){if(e<c.length){var g=e++;return{value:d(g,c[g]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed"],c):c(CodeMirror)})(function(c){var d={noEndTag:!0,soyState:"param-def"},e={alias:{noEndTag:!0},delpackage:{noEndTag:!0},namespace:{noEndTag:!0,soyState:"namespace-def"},"@param":d,"@param?":d,"@inject":d,"@inject?":d,"@state":d,template:{soyState:"templ-def",variableScope:!0},
literal:{},msg:{},fallbackmsg:{noEndTag:!0,reduceIndent:!0},select:{},plural:{},let:{soyState:"var-def"},"if":{},elseif:{noEndTag:!0,reduceIndent:!0},"else":{noEndTag:!0,reduceIndent:!0},"switch":{},"case":{noEndTag:!0,reduceIndent:!0},"default":{noEndTag:!0,reduceIndent:!0},foreach:{variableScope:!0,soyState:"var-def"},ifempty:{noEndTag:!0,reduceIndent:!0},"for":{variableScope:!0,soyState:"var-def"},call:{soyState:"templ-ref"},param:{soyState:"param-ref"},print:{noEndTag:!0},deltemplate:{soyState:"templ-def",
variableScope:!0},delcall:{soyState:"templ-ref"},log:{},element:{variableScope:!0}},f=Object.keys(e).filter(function(c){return!e[c].noEndTag||e[c].reduceIndent});c.defineMode("soy",function(d){function g(b){return b[b.length-1]}function m(b,a,c){if(b.sol()){for(var d=0;d<a.indent&&b.eat(/\s/);d++);if(d)return null}d=b.string;if(c=c.exec(d.substr(b.pos)))b.string=d.substr(0,b.pos+c.index);c=b.hideFirstChars(a.indent,function(){var c=g(a.localStates);return c.mode.token(b,c.state)});b.string=d;return c}
function p(b,a){return{element:a,next:b}}function u(b){b.context&&(b.context.scope&&(b.variables=b.context.scope),b.context=b.context.previousContext)}function v(b,a,c){this.previousContext=b;this.tag=a;this.kind=null;this.scope=c}function q(b,a){var c;if(b.match(/[[]/))return a.soyState.push("list-literal"),a.lookupVariables=!1,null;if(b.match(/map\b/))return a.soyState.push("map-literal"),"keyword";if(b.match(/record\b/))return a.soyState.push("record-literal"),"keyword";if(b.match(/([\w]+)(?=\()/))return"variable callee";
if(c=b.match(/^["']/))return a.soyState.push("string"),a.quoteKind=c[0],"string";if(b.match(/^[(]/))return a.soyState.push("open-parentheses"),null;if(b.match(/(null|true|false)(?!\w)/)||b.match(/0x([0-9a-fA-F]{2,})/)||b.match(/-?([0-9]*[.])?[0-9]+(e[0-9]*)?/))return"atom";if(b.match(/(\||[+\-*\/%]|[=!]=|\?:|[<>]=?)/))return"operator";if(c=b.match(/^\$([\w]+)/)){b=!a.lookupVariables;a:{for(a=a.variables;a;){if(a.element===c[1]){c=!0;break a}a=a.next}c=!1}return c?"variable-2":b?"variable":"variable-2 error"}if(c=
b.match(/^\w+/))return/^(?:as|and|or|not|in|if)$/.test(c[0])?"keyword":null;b.next();return null}var n=c.getMode(d,"text/plain"),r={html:c.getMode(d,{name:"text/html",multilineTagIndentFactor:2,multilineTagIndentPastTag:!1}),attributes:n,text:n,uri:n,trusted_resource_uri:n,css:c.getMode(d,"text/css"),js:c.getMode(d,{name:"text/javascript",statementIndent:2*d.indentUnit})};return{startState:function(){return{soyState:[],variables:p(null,"ij"),scopes:null,indent:0,quoteKind:null,context:null,lookupVariables:!0,
localStates:[{mode:r.html,state:c.startState(r.html)}]}},copyState:function(b){return{tag:b.tag,soyState:b.soyState.concat([]),variables:b.variables,context:b.context,indent:b.indent,quoteKind:b.quoteKind,lookupVariables:b.lookupVariables,localStates:b.localStates.map(function(a){return{mode:a.mode,state:c.copyState(a.mode,a.state)}})}},token:function(b,a){var k;switch(g(a.soyState)){case "comment":b.match(/^.*?\*\//)?a.soyState.pop():b.skipToEnd();if(!a.context||!a.context.scope)for(var h=/@param\??\s+(\S+)/g,
l=b.current();k=h.exec(l);)a.variables=p(a.variables,k[1]);return"comment";case "string":return k=b.match(/^.*?(["']|\\[\s\S])/),k?k[1]==a.quoteKind&&(a.quoteKind=null,a.soyState.pop()):b.skipToEnd(),"string"}if(!a.soyState.length||"literal"!=g(a.soyState)){if(b.match(/^\/\*/))return a.soyState.push("comment"),"comment";if(b.match(b.sol()?/^\s*\/\/.*/:/^\s+\/\/.*/))return"comment"}switch(g(a.soyState)){case "templ-def":if(b.match(/^\.?([\w]+(?!\.[\w]+)*)/))return a.soyState.pop(),"def";b.next();return null;
case "templ-ref":if(k=b.match(/(\.?[a-zA-Z_][a-zA-Z_0-9]+)+/))return a.soyState.pop(),"."==k[0][0]?"variable-2":"variable";b.next();return null;case "namespace-def":if(b.match(/^\.?([\w\.]+)/))return a.soyState.pop(),"variable";b.next();return null;case "param-def":if(k=b.match(/^\w+/))return a.variables=p(a.variables,k[0]),a.soyState.pop(),a.soyState.push("param-type"),"def";b.next();return null;case "param-ref":if(b.match(/^\w+/))return a.soyState.pop(),"property";b.next();return null;case "open-parentheses":return b.match(/[)]/)?
(a.soyState.pop(),null):q(b,a);case "param-type":h=b.peek();if(-1!="}]=>,".indexOf(h))return a.soyState.pop(),null;if("["==h)return a.soyState.push("param-type-record"),null;if("<"==h)return a.soyState.push("param-type-parameter"),null;if(b.match(/^([\w]+|[?])/))return"type";b.next();return null;case "param-type-record":h=b.peek();if("]"==h)return a.soyState.pop(),null;if(b.match(/^\w+/))return a.soyState.push("param-type"),"property";b.next();return null;case "param-type-parameter":if(b.match(/^[>]/))return a.soyState.pop(),
null;if(b.match(/^[<,]/))return a.soyState.push("param-type"),null;b.next();return null;case "var-def":if(k=b.match(/^\$([\w]+)/))return a.variables=p(a.variables,k[1]),a.soyState.pop(),"def";b.next();return null;case "record-literal":if(b.match(/^[)]/))return a.soyState.pop(),null;if(b.match(/[(,]/))return a.soyState.push("map-value"),a.soyState.push("record-key"),null;b.next();return null;case "map-literal":if(b.match(/^[)]/))return a.soyState.pop(),null;if(b.match(/[(,]/))return a.soyState.push("map-value"),
a.soyState.push("map-value"),null;b.next();return null;case "list-literal":return b.match(/\]/)?(a.soyState.pop(),a.lookupVariables=!0,null):b.match(/for\b/)?(a.soyState.push("var-def"),"keyword"):b.match(/in\b/)?(a.lookupVariables=!0,"keyword"):q(b,a);case "record-key":if(b.match(/[\w]+/))return"property";if(b.match(/^[:]/))return a.soyState.pop(),null;b.next();return null;case "map-value":return")"==b.peek()||","==b.peek()||b.match(/^[:)]/)?(a.soyState.pop(),null):q(b,a);case "tag":return l=(h=
"/"==a.tag[0])?a.tag.substring(1):a.tag,b.match(/^\/?}/)?((l="/}"==b.current())&&!h&&u(a),"/template"==a.tag||"/deltemplate"==a.tag?(a.variables=p(null,"ij"),a.indent=0):a.indent-=d.indentUnit*(l||-1==f.indexOf(a.tag)?2:1),a.soyState.pop(),"keyword"):b.match(/^([\w?]+)(?==)/)?(a.context&&a.context.tag==l&&"kind"==b.current()&&(k=b.match(/^="([^"]+)/,!1))&&(h=k[1],a.context.kind=h,l=r[h]||r.html,h=g(a.localStates),h.mode.indent&&(a.indent+=h.mode.indent(h.state,"","")),a.localStates.push({mode:l,state:c.startState(l)})),
"attribute"):q(b,a);case "literal":return b.match(/^(?=\{\/literal})/)?(a.soyState.pop(),this.token(b,a)):m(b,a,/\{\/literal}/)}if(b.match(/^\{literal}/))return a.indent+=d.indentUnit,a.soyState.push("literal"),a.context=new v(a.context,"literal",a.variables),"keyword";if(k=b.match(/^\{([/@\\]?\w+\??)(?=$|[\s}]|\/[/*])/)){b=a.tag;a.tag=k[1];h="/"==a.tag[0];var n=!!e[a.tag];l=h?a.tag.substring(1):a.tag;k=e[l];"/switch"!=a.tag&&(a.indent+=((h||k&&k.reduceIndent)&&"switch"!=b?1:2)*d.indentUnit);a.soyState.push("tag");
b=!1;k?(h||k.soyState&&a.soyState.push(k.soyState),k.noEndTag||!n&&h)?h&&(a.context&&a.context.tag==l?a.context&&(a.context.kind&&(a.localStates.pop(),h=g(a.localStates),h.mode.indent&&(a.indent-=h.mode.indent(h.state,"",""))),u(a)):b=!0):a.context=new v(a.context,a.tag,k.variableScope?a.variables:null):h&&(b=!0);return(b?"error ":"")+"keyword"}return b.eat("{")?(a.tag="print",a.indent+=2*d.indentUnit,a.soyState.push("tag"),"keyword"):m(b,a,/\{|\s+\/\/|\/\*/)},indent:function(b,a,e){var f=b.indent,
k=g(b.soyState);if("comment"==k)return c.Pass;if("literal"==k)/^\{\/literal}/.test(a)&&(f-=d.indentUnit);else{if(/^\s*\{\/(template|deltemplate)\b/.test(a))return 0;/^\{(\/|(fallbackmsg|elseif|else|ifempty)\b)/.test(a)&&(f-=d.indentUnit);"switch"!=b.tag&&/^\{(case|default)\b/.test(a)&&(f-=d.indentUnit);/^\{\/switch\b/.test(a)&&(f-=d.indentUnit)}b=g(b.localStates);f&&b.mode.indent&&(f+=b.mode.indent(b.state,a,e));return f},innerMode:function(b){return b.soyState.length&&"literal"!=g(b.soyState)?null:
g(b.localStates)},electricInput:/^\s*\{(\/|\/template|\/deltemplate|\/switch|fallbackmsg|elseif|else|case|default|ifempty|\/literal\})$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",useInnerComments:!1,fold:"indent"}},"htmlmixed");c.registerHelper("wordChars","soy",/[\w$]/);c.registerHelper("hintWords","soy",Object.keys(e).concat(["css","debugger"]));c.defineMIME("text/x-soy","soy")});
