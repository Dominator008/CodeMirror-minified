'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var e=0;return function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,g){c!=Array.prototype&&c!=Object.prototype&&(c[e]=g.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(c,e){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function c(g){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+e++,g)}var e=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var g=0,h={next:function(){if(g<c.length){var l=g++;return{value:e(l,c[l]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(c,e,g,h){if(e){g=$jscomp.global;c=c.split(".");for(h=0;h<c.length-1;h++){var l=c[h];l in g||(g[l]={});g=g[l]}c=c[c.length-1];h=g[c];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(g,c,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed"],c):c(CodeMirror)})(function(c){var e={noEndTag:!0,soyState:"param-def"},g={alias:{noEndTag:!0},delpackage:{noEndTag:!0},namespace:{noEndTag:!0,soyState:"namespace-def"},"@param":e,"@param?":e,"@inject":e,"@inject?":e,"@state":e,template:{soyState:"templ-def",variableScope:!0},
literal:{},msg:{},fallbackmsg:{noEndTag:!0,reduceIndent:!0},select:{},plural:{},let:{soyState:"var-def"},"if":{},elseif:{noEndTag:!0,reduceIndent:!0},"else":{noEndTag:!0,reduceIndent:!0},"switch":{},"case":{noEndTag:!0,reduceIndent:!0},"default":{noEndTag:!0,reduceIndent:!0},foreach:{variableScope:!0,soyState:"var-def"},ifempty:{noEndTag:!0,reduceIndent:!0},"for":{variableScope:!0,soyState:"var-def"},call:{soyState:"templ-ref"},param:{soyState:"param-ref"},print:{noEndTag:!0},deltemplate:{soyState:"templ-def",
variableScope:!0},delcall:{soyState:"templ-ref"},log:{},element:{variableScope:!0}},h=Object.keys(g).filter(function(c){return!g[c].noEndTag||g[c].reduceIndent});c.defineMode("soy",function(e){function k(b){return b[b.length-1]}function l(b,a,c){if(b.sol()){for(var d=0;d<a.indent&&b.eat(/\s/);d++);if(d)return null}d=b.string;if(c=c.exec(d.substr(b.pos)))b.string=d.substr(0,b.pos+c.index);c=b.hideFirstChars(a.indent,function(){var c=k(a.localStates);return c.mode.token(b,c.state)});b.string=d;return c}
function n(b,a){return{element:a,next:b}}function r(b){b.context&&(b.context.scope&&(b.variables=b.context.scope),b.context=b.context.previousContext)}function t(b,a,c){this.previousContext=b;this.tag=a;this.kind=null;this.scope=c}var p=c.getMode(e,"text/plain"),q={html:c.getMode(e,{name:"text/html",multilineTagIndentFactor:2,multilineTagIndentPastTag:!1}),attributes:p,text:p,uri:p,trusted_resource_uri:p,css:c.getMode(e,"text/css"),js:c.getMode(e,{name:"text/javascript",statementIndent:2*e.indentUnit})};
return{startState:function(){return{soyState:[],templates:null,variables:n(null,"ij"),scopes:null,indent:0,quoteKind:null,context:null,localStates:[{mode:q.html,state:c.startState(q.html)}]}},copyState:function(b){return{tag:b.tag,soyState:b.soyState.concat([]),templates:b.templates,variables:b.variables,context:b.context,indent:b.indent,quoteKind:b.quoteKind,localStates:b.localStates.map(function(a){return{mode:a.mode,state:c.copyState(a.mode,a.state)}})}},token:function(b,a){var d;switch(k(a.soyState)){case "comment":b.match(/^.*?\*\//)?
a.soyState.pop():b.skipToEnd();if(!a.context||!a.context.scope)for(var f=/@param\??\s+(\S+)/g,m=b.current();d=f.exec(m);)a.variables=n(a.variables,d[1]);return"comment";case "string":return d=b.match(/^.*?(["']|\\[\s\S])/),d?d[1]==a.quoteKind&&(a.quoteKind=null,a.soyState.pop()):b.skipToEnd(),"string"}if(!a.soyState.length||"literal"!=k(a.soyState)){if(b.match(/^\/\*/))return a.soyState.push("comment"),"comment";if(b.match(b.sol()?/^\s*\/\/.*/:/^\s+\/\/.*/))return"comment"}switch(k(a.soyState)){case "templ-def":if(d=
b.match(/^\.?([\w]+(?!\.[\w]+)*)/))return a.templates=n(a.templates,d[1]),a.soyState.pop(),"def";b.next();return null;case "templ-ref":if(d=b.match(/(\.?[a-zA-Z_][a-zA-Z_0-9]+)+/))return a.soyState.pop(),"."==d[0][0]?"variable-2":"variable";b.next();return null;case "namespace-def":if(b.match(/^\.?([\w\.]+)/))return a.soyState.pop(),"variable";b.next();return null;case "param-def":if(d=b.match(/^\w+/))return a.variables=n(a.variables,d[0]),a.soyState.pop(),a.soyState.push("param-type"),"def";b.next();
return null;case "param-ref":if(b.match(/^\w+/))return a.soyState.pop(),"property";b.next();return null;case "param-type":f=b.peek();if("}"==f||"="==f)return a.soyState.pop(),null;if(b.eatWhile(/^([\w]+|[?])/))return"type";b.next();return null;case "var-def":if(d=b.match(/^\$([\w]+)/))return a.variables=n(a.variables,d[1]),a.soyState.pop(),"def";b.next();return null;case "tag":m=(f="/"==a.tag[0])?a.tag.substring(1):a.tag;if(b.match(/^\/?}/))return(d="/}"==b.current())&&!f&&r(a),"/template"==a.tag||
"/deltemplate"==a.tag?(a.variables=n(null,"ij"),a.indent=0):a.indent-=e.indentUnit*(d||-1==h.indexOf(a.tag)?2:1),a.soyState.pop(),"keyword";if(b.match(/^([\w?]+)(?==)/))return a.context&&a.context.tag==m&&"kind"==b.current()&&(d=b.match(/^="([^"]+)/,!1))&&(f=d[1],a.context.kind=f,d=q[f]||q.html,f=k(a.localStates),f.mode.indent&&(a.indent+=f.mode.indent(f.state,"","")),a.localStates.push({mode:d,state:c.startState(d)})),"attribute";if(b.match(/([\w]+)(?=\()/))return"variable callee";if(d=b.match(/^["']/))return a.soyState.push("string"),
a.quoteKind=d,"string";if(b.match(/(null|true|false)(?!\w)/)||b.match(/0x([0-9a-fA-F]{2,})/)||b.match(/-?([0-9]*[.])?[0-9]+(e[0-9]*)?/))return"atom";if(b.match(/(\||[+\-*\/%]|[=!]=|\?:|[<>]=?)/))return"operator";if(d=b.match(/^\$([\w]+)/)){a:{for(a=a.variables;a;){if(a.element===d[1]){a=!0;break a}a=a.next}a=!1}return a?"variable-2":"variable-2 error"}if(d=b.match(/^\w+/))return/^(?:as|and|or|not|in)$/.test(d[0])?"keyword":null;b.next();return null;case "literal":return b.match(/^(?=\{\/literal})/)?
(a.soyState.pop(),this.token(b,a)):l(b,a,/\{\/literal}/)}if(b.match(/^\{literal}/))return a.indent+=e.indentUnit,a.soyState.push("literal"),a.context=new t(a.context,"literal",a.variables),"keyword";if(d=b.match(/^\{([/@\\]?\w+\??)(?=$|[\s}]|\/[/*])/)){b=a.tag;a.tag=d[1];f="/"==a.tag[0];var p=!!g[a.tag];m=f?a.tag.substring(1):a.tag;d=g[m];"/switch"!=a.tag&&(a.indent+=((f||d&&d.reduceIndent)&&"switch"!=b?1:2)*e.indentUnit);a.soyState.push("tag");b=!1;d?(f||d.soyState&&a.soyState.push(d.soyState),d.noEndTag||
!p&&f)?f&&(a.context&&a.context.tag==m?a.context&&(a.context.kind&&(a.localStates.pop(),f=k(a.localStates),f.mode.indent&&(a.indent-=f.mode.indent(f.state,"",""))),r(a)):b=!0):a.context=new t(a.context,a.tag,d.variableScope?a.variables:null):f&&(b=!0);return(b?"error ":"")+"keyword"}return b.eat("{")?(a.tag="print",a.indent+=2*e.indentUnit,a.soyState.push("tag"),"keyword"):l(b,a,/\{|\s+\/\/|\/\*/)},indent:function(b,a,d){var f=b.indent,g=k(b.soyState);if("comment"==g)return c.Pass;if("literal"==g)/^\{\/literal}/.test(a)&&
(f-=e.indentUnit);else{if(/^\s*\{\/(template|deltemplate)\b/.test(a))return 0;/^\{(\/|(fallbackmsg|elseif|else|ifempty)\b)/.test(a)&&(f-=e.indentUnit);"switch"!=b.tag&&/^\{(case|default)\b/.test(a)&&(f-=e.indentUnit);/^\{\/switch\b/.test(a)&&(f-=e.indentUnit)}b=k(b.localStates);f&&b.mode.indent&&(f+=b.mode.indent(b.state,a,d));return f},innerMode:function(b){return b.soyState.length&&"literal"!=k(b.soyState)?null:k(b.localStates)},electricInput:/^\s*\{(\/|\/template|\/deltemplate|\/switch|fallbackmsg|elseif|else|case|default|ifempty|\/literal\})$/,
lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",useInnerComments:!1,fold:"indent"}},"htmlmixed");c.registerHelper("wordChars","soy",/[\w$]/);c.registerHelper("hintWords","soy",Object.keys(g).concat(["css","debugger"]));c.defineMIME("text/x-soy","soy")});
