'use strict';(function(u){"object"==typeof exports&&"object"==typeof module?u(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],u):u(CodeMirror)})(function(u){u.defineMode("javascript",function(Na,z){function t(a,b,d){S=a;Y=d;return b}function G(a,b){var d=a.next();if('"'==d||"'"==d)return b.tokenize=Oa(d),b.tokenize(a,b);if("."==d&&a.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return t("number","number");if("."==d&&a.match(".."))return t("spread",
"meta");if(/[\[\]{}\(\),;:\.]/.test(d))return t(d);if("="==d&&a.eat(">"))return t("=>","operator");if("0"==d&&a.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return t("number","number");if(/\d/.test(d))return a.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),t("number","number");if("/"==d){if(a.eat("*"))return b.tokenize=Z,Z(a,b);if(a.eat("/"))return a.skipToEnd(),t("comment","comment");if(ua(a,b,1)){a:for(var f=b=!1;null!=(d=a.next());){if(!b){if("/"==d&&!f)break a;"["==d?f=!0:f&&"]"==
d&&(f=!1)}b=!b&&"\\"==d}a.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/);return t("regexp","string-2")}a.eat("=");return t("operator","operator",a.current())}if("`"==d)return b.tokenize=aa,aa(a,b);if("#"==d&&"!"==a.peek())return a.skipToEnd(),t("meta","meta");if("#"==d&&a.eatWhile(ba))return t("variable","property");if("<"==d&&a.match("!--")||"-"==d&&a.match("->")&&!/\S/.test(a.string.slice(0,a.start)))return a.skipToEnd(),t("comment","comment");if(va.test(d))return">"==d&&b.lexical&&">"==b.lexical.type||
(a.eat("=")?"!"!=d&&"="!=d||a.eat("="):/[<>*+\-|&?]/.test(d)&&(a.eat(d),">"==d&&a.eat(d))),"?"==d&&a.eat(".")?t("."):t("operator","operator",a.current());if(ba.test(d)){a.eatWhile(ba);d=a.current();if("."!=b.lastType){if(wa.propertyIsEnumerable(d))return a=wa[d],t(a.type,a.style,d);if("async"==d&&a.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return t("async","keyword",d)}return t("variable","variable",d)}}function Oa(a){return function(b,d){var f=!1,g;if(ca&&"@"==b.peek()&&b.match(Pa))return d.tokenize=
G,t("jsonld-keyword","meta");for(;null!=(g=b.next())&&(g!=a||f);)f=!f&&"\\"==g;f||(d.tokenize=G);return t("string","string")}}function Z(a,b){for(var d=!1,f;f=a.next();){if("/"==f&&d){b.tokenize=G;break}d="*"==f}return t("comment","comment")}function aa(a,b){for(var d=!1,f;null!=(f=a.next());){if(!d&&("`"==f||"$"==f&&a.eat("{"))){b.tokenize=G;break}d=!d&&"\\"==f}return t("quasi","string-2",a.current())}function ma(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var d=a.string.indexOf("=>",a.start);if(!(0>
d)){if(r){var f=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,d));f&&(d=f.index)}f=0;var g=!1;for(--d;0<=d;--d){var m=a.string.charAt(d),x="([{}])".indexOf(m);if(0<=x&&3>x){if(!f){++d;break}if(0==--f){"("==m&&(g=!0);break}}else if(3<=x&&6>x)++f;else if(ba.test(m))g=!0;else if(/["'\/`]/.test(m))for(;;--d){if(0==d)return;if(a.string.charAt(d-1)==m&&"\\"!=a.string.charAt(d-2)){d--;break}}else if(g&&!f){++d;break}}g&&!f&&(b.fatArrowAt=d)}}function xa(a,b,d,f,g,m){this.indented=
a;this.column=b;this.type=d;this.prev=g;this.info=m;null!=f&&(this.align=f)}function k(){for(var a=arguments.length-1;0<=a;a--)e.cc.push(arguments[a])}function c(){k.apply(null,arguments);return!0}function na(a,b){for(;b;b=b.next)if(b.name==a)return!0;return!1}function K(a){var b=e.state;e.marked="def";if(b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var d=ya(a,b.context);if(null!=d){b.context=d;return}}else if(!na(a,b.localVars)){b.localVars=new T(a,b.localVars);return}z.globalVars&&
!na(a,b.globalVars)&&(b.globalVars=new T(a,b.globalVars))}function ya(a,b){return b?b.block?(a=ya(a,b.prev))?a==b.prev?b:new U(a,b.vars,!0):null:na(a,b.vars)?b:new U(b.prev,new T(a,b.vars),!1):null}function da(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function U(a,b,d){this.prev=a;this.vars=b;this.block=d}function T(a,b){this.name=a;this.next=b}function L(){e.state.context=new U(e.state.context,e.state.localVars,!1);e.state.localVars=Qa}function za(){e.state.context=
new U(e.state.context,e.state.localVars,!0);e.state.localVars=null}function B(){e.state.localVars=e.state.context.vars;e.state.context=e.state.context.prev}function l(a,b){var d=function(){var f=e.state,g=f.indented;if("stat"==f.lexical.type)g=f.lexical.indented;else for(var m=f.lexical;m&&")"==m.type&&m.align;m=m.prev)g=m.indented;f.lexical=new xa(g,e.stream.column(),a,null,f.lexical,b)};d.lex=!0;return d}function h(){var a=e.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),
a.lexical=a.lexical.prev)}function n(a){function b(d){return d==a?c():";"==a||"}"==d||")"==d||"]"==d?k():c(b)}return b}function v(a,b){return"var"==a?c(l("vardef",b),oa,n(";"),h):"keyword a"==a?c(l("form"),pa,v,h):"keyword b"==a?c(l("form"),v,h):"keyword d"==a?e.stream.match(/^\s*$/,!1)?c():c(l("stat"),V,n(";"),h):"debugger"==a?c(n(";")):"{"==a?c(l("}"),za,ea,h,B):";"==a?c():"if"==a?("else"==e.state.lexical.info&&e.state.cc[e.state.cc.length-1]==h&&e.state.cc.pop()(),c(l("form"),pa,v,h,Aa)):"function"==
a?c(D):"for"==a?c(l("form"),Ba,v,h):"class"==a||r&&"interface"==b?(e.marked="keyword",c(l("form","class"==a?a:b),Ca,h)):"variable"==a?r&&"declare"==b?(e.marked="keyword",c(v)):r&&("module"==b||"enum"==b||"type"==b)&&e.stream.match(/^\s*\w/,!1)?(e.marked="keyword","enum"==b?c(Da):"type"==b?c(Ea,n("operator"),p,n(";")):c(l("form"),A,n("{"),l("}"),ea,h,h)):r&&"namespace"==b?(e.marked="keyword",c(l("form"),q,v,h)):r&&"abstract"==b?(e.marked="keyword",c(v)):c(l("stat"),Ra):"switch"==a?c(l("form"),pa,n("{"),
l("}","switch"),za,ea,h,h,B):"case"==a?c(q,n(":")):"default"==a?c(n(":")):"catch"==a?c(l("form"),L,Sa,v,h,B):"export"==a?c(l("stat"),Ta,h):"import"==a?c(l("stat"),Ua,h):"async"==a?c(v):"@"==b?c(q,v):k(l("stat"),q,n(";"),h)}function Sa(a){if("("==a)return c(H,n(")"))}function q(a,b){return Fa(a,b,!1)}function y(a,b){return Fa(a,b,!0)}function pa(a){return"("!=a?k():c(l(")"),V,n(")"),h)}function Fa(a,b,d){if(e.state.fatArrowAt==e.stream.start){var f=d?Ga:Ha;if("("==a)return c(L,l(")"),w(H,")"),h,n("=>"),
f,B);if("variable"==a)return k(L,A,n("=>"),f,B)}f=d?M:N;return Va.hasOwnProperty(a)?c(f):"function"==a?c(D,f):"class"==a||r&&"interface"==b?(e.marked="keyword",c(l("form"),Wa,h)):"keyword c"==a||"async"==a?c(d?y:q):"("==a?c(l(")"),V,n(")"),h,f):"operator"==a||"spread"==a?c(d?y:q):"["==a?c(l("]"),Xa,h,f):"{"==a?W(fa,"}",null,f):"quasi"==a?k(ha,f):"new"==a?c(Ya(d)):"import"==a?c(q):c()}function V(a){return a.match(/[;\}\)\],]/)?k():k(q)}function N(a,b){return","==a?c(V):M(a,b,!1)}function M(a,b,d){var f=
0==d?N:M,g=0==d?q:y;if("=>"==a)return c(L,d?Ga:Ha,B);if("operator"==a)return/\+\+|--/.test(b)||r&&"!"==b?c(f):r&&"<"==b&&e.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?c(l(">"),w(p,">"),h,f):"?"==b?c(q,n(":"),g):c(g);if("quasi"==a)return k(ha,f);if(";"!=a){if("("==a)return W(y,")","call",f);if("."==a)return c(Za,f);if("["==a)return c(l("]"),V,n("]"),h,f);if(r&&"as"==b)return e.marked="keyword",c(p,f);if("regexp"==a)return e.state.lastType=e.marked="operator",e.stream.backUp(e.stream.pos-e.stream.start-
1),c(g)}}function ha(a,b){return"quasi"!=a?k():"${"!=b.slice(b.length-2)?c(ha):c(q,$a)}function $a(a){if("}"==a)return e.marked="string-2",e.state.tokenize=aa,c(ha)}function Ha(a){ma(e.stream,e.state);return k("{"==a?v:q)}function Ga(a){ma(e.stream,e.state);return k("{"==a?v:y)}function Ya(a){return function(b){return"."==b?c(a?ab:bb):"variable"==b&&r?c(cb,a?M:N):k(a?y:q)}}function bb(a,b){if("target"==b)return e.marked="keyword",c(N)}function ab(a,b){if("target"==b)return e.marked="keyword",c(M)}
function Ra(a){return":"==a?c(h,v):k(N,n(";"),h)}function Za(a){if("variable"==a)return e.marked="property",c()}function fa(a,b){if("async"==a)return e.marked="property",c(fa);if("variable"==a||"keyword"==e.style){e.marked="property";if("get"==b||"set"==b)return c(db);var d;r&&e.state.fatArrowAt==e.stream.start&&(d=e.stream.match(/^\s*:\s*/,!1))&&(e.state.fatArrowAt=e.stream.pos+d[0].length);return c(I)}if("number"==a||"string"==a)return e.marked=ca?"property":e.style+" property",c(I);if("jsonld-keyword"==
a)return c(I);if(r&&da(b))return e.marked="keyword",c(fa);if("["==a)return c(q,O,n("]"),I);if("spread"==a)return c(y,I);if("*"==b)return e.marked="keyword",c(fa);if(":"==a)return k(I)}function db(a){if("variable"!=a)return k(I);e.marked="property";return c(D)}function I(a){if(":"==a)return c(y);if("("==a)return k(D)}function w(a,b,d){function f(g,m){return(d?-1<d.indexOf(g):","==g)?(g=e.state.lexical,"call"==g.info&&(g.pos=(g.pos||0)+1),c(function(x,qa){return x==b||qa==b?k():k(a)},f)):g==b||m==b?
c():d&&-1<d.indexOf(";")?k(a):c(n(b))}return function(g,m){return g==b||m==b?c():k(a,f)}}function W(a,b,d){for(var f=3;f<arguments.length;f++)e.cc.push(arguments[f]);return c(l(b,d),w(a,b),h)}function ea(a){return"}"==a?c():k(v,ea)}function O(a,b){if(r){if(":"==a)return c(p);if("?"==b)return c(O)}}function eb(a,b){if(r&&(":"==a||"in"==b))return c(p)}function Ia(a){if(r&&":"==a)return e.stream.match(/^\s*\w+\s+is\b/,!1)?c(q,fb,p):c(p)}function fb(a,b){if("is"==b)return e.marked="keyword",c()}function p(a,
b){if("keyof"==b||"typeof"==b||"infer"==b)return e.marked="keyword",c("typeof"==b?y:p);if("variable"==a||"void"==b)return e.marked="type",c(E);if("|"==b||"&"==b)return c(p);if("string"==a||"number"==a||"atom"==a)return c(E);if("["==a)return c(l("]"),w(p,"]",","),h,E);if("{"==a)return c(l("}"),ra,h,E);if("("==a)return c(w(sa,")"),gb,E);if("<"==a)return c(w(p,">"),p)}function gb(a){if("=>"==a)return c(p)}function ra(a){return a.match(/[\}\)\]]/)?c():","==a||";"==a?c(ra):k(X,ra)}function X(a,b){if("variable"==
a||"keyword"==e.style)return e.marked="property",c(X);if("?"==b||"number"==a||"string"==a)return c(X);if(":"==a)return c(p);if("["==a)return c(n("variable"),eb,n("]"),X);if("("==a)return k(P,X);if(!a.match(/[;\}\)\],]/))return c()}function sa(a,b){return"variable"==a&&e.stream.match(/^\s*[?:]/,!1)||"?"==b?c(sa):":"==a?c(p):"spread"==a?c(sa):k(p)}function E(a,b){if("<"==b)return c(l(">"),w(p,">"),h,E);if("|"==b||"."==a||"&"==b)return c(p);if("["==a)return c(p,n("]"),E);if("extends"==b||"implements"==
b)return e.marked="keyword",c(p);if("?"==b)return c(p,n(":"),p)}function cb(a,b){if("<"==b)return c(l(">"),w(p,">"),h,E)}function ia(){return k(p,hb)}function hb(a,b){if("="==b)return c(p)}function oa(a,b){return"enum"==b?(e.marked="keyword",c(Da)):k(A,O,F,ib)}function A(a,b){if(r&&da(b))return e.marked="keyword",c(A);if("variable"==a)return K(b),c();if("spread"==a)return c(A);if("["==a)return W(jb,"]");if("{"==a)return W(Ja,"}")}function Ja(a,b){if("variable"==a&&!e.stream.match(/^\s*:/,!1))return K(b),
c(F);"variable"==a&&(e.marked="property");return"spread"==a?c(A):"}"==a?k():"["==a?c(q,n("]"),n(":"),Ja):c(n(":"),A,F)}function jb(){return k(A,F)}function F(a,b){if("="==b)return c(y)}function ib(a){if(","==a)return c(oa)}function Aa(a,b){if("keyword b"==a&&"else"==b)return c(l("form","else"),v,h)}function Ba(a,b){if("await"==b)return c(Ba);if("("==a)return c(l(")"),kb,h)}function kb(a){return"var"==a?c(oa,Q):"variable"==a?c(Q):k(Q)}function Q(a,b){return")"==a?c():";"==a?c(Q):"in"==b||"of"==b?(e.marked=
"keyword",c(q,Q)):k(q,Q)}function D(a,b){if("*"==b)return e.marked="keyword",c(D);if("variable"==a)return K(b),c(D);if("("==a)return c(L,l(")"),w(H,")"),h,Ia,v,B);if(r&&"<"==b)return c(l(">"),w(ia,">"),h,D)}function P(a,b){if("*"==b)return e.marked="keyword",c(P);if("variable"==a)return K(b),c(P);if("("==a)return c(L,l(")"),w(H,")"),h,Ia,B);if(r&&"<"==b)return c(l(">"),w(ia,">"),h,P)}function Ea(a,b){if("keyword"==a||"variable"==a)return e.marked="type",c(Ea);if("<"==b)return c(l(">"),w(ia,">"),h)}
function H(a,b){"@"==b&&c(q,H);return"spread"==a?c(H):r&&da(b)?(e.marked="keyword",c(H)):r&&"this"==a?c(O,F):k(A,O,F)}function Wa(a,b){return"variable"==a?Ca(a,b):ja(a,b)}function Ca(a,b){if("variable"==a)return K(b),c(ja)}function ja(a,b){if("<"==b)return c(l(">"),w(ia,">"),h,ja);if("extends"==b||"implements"==b||r&&","==a)return"implements"==b&&(e.marked="keyword"),c(r?p:q,ja);if("{"==a)return c(l("}"),C,h)}function C(a,b){if("async"==a||"variable"==a&&("static"==b||"get"==b||"set"==b||r&&da(b))&&
e.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return e.marked="keyword",c(C);if("variable"==a||"keyword"==e.style)return e.marked="property",c(ka,C);if("number"==a||"string"==a)return c(ka,C);if("["==a)return c(q,O,n("]"),ka,C);if("*"==b)return e.marked="keyword",c(C);if(r&&"("==a)return k(P,C);if(";"==a||","==a)return c(C);if("}"==a)return c();if("@"==b)return c(q,C)}function ka(a,b){if("?"==b)return c(ka);if(":"==a)return c(p,F);if("="==b)return c(y);a=e.state.lexical.prev;return k(a&&"interface"==
a.info?P:D)}function Ta(a,b){return"*"==b?(e.marked="keyword",c(ta,n(";"))):"default"==b?(e.marked="keyword",c(q,n(";"))):"{"==a?c(w(Ka,"}"),ta,n(";")):k(v)}function Ka(a,b){if("as"==b)return e.marked="keyword",c(n("variable"));if("variable"==a)return k(y,Ka)}function Ua(a){return"string"==a?c():"("==a?k(q):k(la,La,ta)}function la(a,b){if("{"==a)return W(la,"}");"variable"==a&&K(b);"*"==b&&(e.marked="keyword");return c(lb)}function La(a){if(","==a)return c(la,La)}function lb(a,b){if("as"==b)return e.marked=
"keyword",c(la)}function ta(a,b){if("from"==b)return e.marked="keyword",c(q)}function Xa(a){return"]"==a?c():k(w(y,"]"))}function Da(){return k(l("form"),A,n("{"),l("}"),w(mb,"}"),h,h)}function mb(){return k(A,F)}function ua(a,b,d){return b.tokenize==G&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(d||0)))}var R=Na.indentUnit,Ma=z.statementIndent,ca=z.jsonld,J=z.json||ca,r=z.typescript,
ba=z.wordCharacters||/[\w$\xa1-\uffff]/,wa=function(){function a(qa){return{type:qa,style:"keyword"}}var b=a("keyword a"),d=a("keyword b"),f=a("keyword c"),g=a("keyword d"),m=a("operator"),x={type:"atom",style:"atom"};return{"if":a("if"),"while":b,"with":b,"else":d,"do":d,"try":d,"finally":d,"return":g,"break":g,"continue":g,"new":a("new"),"delete":f,"void":f,"throw":f,"debugger":a("debugger"),"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),
"switch":a("switch"),"case":a("case"),"default":a("default"),"in":m,"typeof":m,"instanceof":m,"true":x,"false":x,"null":x,undefined:x,NaN:x,Infinity:x,"this":a("this"),"class":a("class"),"super":a("atom"),yield:f,"export":a("export"),"import":a("import"),"extends":f,await:f}}(),va=/[+\-*&%=<>!?|~^@]/,Pa=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,S,Y,Va={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},e={state:null,column:null,
marked:null,cc:null},Qa=new T("this",new T("arguments",null));B.lex=!0;h.lex=!0;return{startState:function(a){a={tokenize:G,lastType:"sof",cc:[],lexical:new xa((a||0)-R,0,"block",!1),localVars:z.localVars,context:z.localVars&&new U(null,null,!1),indented:a||0};z.globalVars&&"object"==typeof z.globalVars&&(a.globalVars=z.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),ma(a,b));if(b.tokenize!=Z&&a.eatSpace())return null;
var d=b.tokenize(a,b);if("comment"==S)return d;b.lastType="operator"!=S||"++"!=Y&&"--"!=Y?S:"incdec";a:{var f=S,g=Y,m=b.cc;e.state=b;e.stream=a;e.marked=null;e.cc=m;e.style=d;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((m.length?m.pop():J?q:v)(f,g)){for(;m.length&&m[m.length-1].lex;)m.pop()();if(e.marked){d=e.marked;break a}if(a="variable"==f)b:{for(a=b.localVars;a;a=a.next)if(a.name==g){a=!0;break b}for(b=b.context;b;b=b.prev)for(a=b.vars;a;a=a.next)if(a.name==g){a=!0;break b}a=
void 0}if(a){d="variable-2";break a}break a}}return d},indent:function(a,b){if(a.tokenize==Z||a.tokenize==aa)return u.Pass;if(a.tokenize!=G)return 0;var d=b&&b.charAt(0),f=a.lexical,g;if(!/^\s*else\b/.test(b))for(var m=a.cc.length-1;0<=m;--m){var x=a.cc[m];if(x==h)f=f.prev;else if(x!=Aa)break}for(;!("stat"!=f.type&&"form"!=f.type||"}"!=d&&(!(g=a.cc[a.cc.length-1])||g!=N&&g!=M||/^[,\.=+\-*:?[\(]/.test(b)));)f=f.prev;Ma&&")"==f.type&&"stat"==f.prev.type&&(f=f.prev);g=f.type;m=d==g;return"vardef"==g?
f.indented+("operator"==a.lastType||","==a.lastType?f.info.length+1:0):"form"==g&&"{"==d?f.indented:"form"==g?f.indented+R:"stat"==g?(d=f.indented,a="operator"==a.lastType||","==a.lastType||va.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),d+(a?Ma||R:0)):"switch"!=f.info||m||0==z.doubleIndentSwitch?f.align?f.column+(m?0:1):f.indented+(m?0:R):f.indented+(/^(?:case|default)\b/.test(b)?R:2*R)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:J?null:"/*",blockCommentEnd:J?null:"*/",blockCommentContinue:J?
null:" * ",lineComment:J?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:J?"json":"javascript",jsonldMode:ca,jsonMode:J,expressionAllowed:ua,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=q&&b!=y||a.cc.pop()}}});u.registerHelper("wordChars","javascript",/[\w$]/);u.defineMIME("text/javascript","javascript");u.defineMIME("text/ecmascript","javascript");u.defineMIME("application/javascript","javascript");u.defineMIME("application/x-javascript","javascript");u.defineMIME("application/ecmascript",
"javascript");u.defineMIME("application/json",{name:"javascript",json:!0});u.defineMIME("application/x-json",{name:"javascript",json:!0});u.defineMIME("application/manifest+json",{name:"javascript",json:!0});u.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});u.defineMIME("text/typescript",{name:"javascript",typescript:!0});u.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
